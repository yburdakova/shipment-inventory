<div class="conversion-tool-container">
  <div class="select-box">
    <input 
      type="file" 
      webkitdirectory 
      (change)="onFolderSelected($event)" 
      class="file-input"
    >
    <button class="btn" (click)="markAsConverted()">Change Status to Converted</button>
  </div>
  
  
  
  
  <div *ngIf="converted.length > 0" class="result-block">
    <div class="save-btn-box">
      <div class="bold">
        ✅ Successfully converted:
        <span id="returning-number">{{ converted.length }}</span>
      </div>
      <button (click)="downloadList(converted, 'converted-cases.txt')" class="save-button">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_67_2)">
            <path d="M18 4V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H2C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H14L18 4ZM16 4.85L13.15 2H2V16H16V4.85ZM9 15C9.83333 15 10.5417 14.7083 11.125 14.125C11.7083 13.5417 12 12.8333 12 12C12 11.1667 11.7083 10.4583 11.125 9.875C10.5417 9.29167 9.83333 9 9 9C8.16667 9 7.45833 9.29167 6.875 9.875C6.29167 10.4583 6 11.1667 6 12C6 12.8333 6.29167 13.5417 6.875 14.125C7.45833 14.7083 8.16667 15 9 15ZM3 7H12V3H3V7Z" fill="#5F6368"/>
          </g>
          <defs>
            <clipPath id="clip0_67_2">
              <rect width="18" height="18" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </button>
    </div>
  </div>
  
  
  <div *ngIf="alreadyConverted.length > 0" class="result-block">
    <div class="save-btn-box">
      <div class="bold">🟡 Already converted: 
          <span id="returning-number"> {{ alreadyConverted.length }}</span>
      </div>
      <button (click)="downloadList(alreadyConverted, 'already-converted-cases.txt')" class="save-button">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_67_2)">
            <path d="M18 4V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H2C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H14L18 4ZM16 4.85L13.15 2H2V16H16V4.85ZM9 15C9.83333 15 10.5417 14.7083 11.125 14.125C11.7083 13.5417 12 12.8333 12 12C12 11.1667 11.7083 10.4583 11.125 9.875C10.5417 9.29167 9.83333 9 9 9C8.16667 9 7.45833 9.29167 6.875 9.875C6.29167 10.4583 6 11.1667 6 12C6 12.8333 6.29167 13.5417 6.875 14.125C7.45833 14.7083 8.16667 15 9 15ZM3 7H12V3H3V7Z" fill="#5F6368"/>
          </g>
          <defs>
            <clipPath id="clip0_67_2">
              <rect width="18" height="18" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </button>
    </div>
  </div>
  
  <div *ngIf="notFound.length > 0" class="result-block">
    <h3>❌ Not found:</h3>
    <ul>
      <li *ngFor="let caseNumber of notFound">{{ caseNumber }}</li>
    </ul>
    <button (click)="downloadList(notFound, 'not-found-cases.txt')" class="save-button">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_67_2)">
          <path d="M18 4V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H2C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H14L18 4ZM16 4.85L13.15 2H2V16H16V4.85ZM9 15C9.83333 15 10.5417 14.7083 11.125 14.125C11.7083 13.5417 12 12.8333 12 12C12 11.1667 11.7083 10.4583 11.125 9.875C10.5417 9.29167 9.83333 9 9 9C8.16667 9 7.45833 9.29167 6.875 9.875C6.29167 10.4583 6 11.1667 6 12C6 12.8333 6.29167 13.5417 6.875 14.125C7.45833 14.7083 8.16667 15 9 15ZM3 7H12V3H3V7Z" fill="#5F6368"/>
        </g>
        <defs>
          <clipPath id="clip0_67_2">
            <rect width="18" height="18" fill="white"/>
          </clipPath>
        </defs>
      </svg>
    </button>
  </div>
  
  
  <div *ngIf="similarFound.length > 0" class="result-block">
    <h3>🔎 Similar entries found:</h3>
    <ul>
      <li *ngFor="let pair of similarFound">
        {{ pair.original }} → <strong>{{ pair.match }}</strong>
        <button class="small-btn" (click)="updateSimilarCase(pair.match)">Update status</button>
      </li>
    </ul>
  </div>

  <div class="note-block conversion-tool-note" *ngIf="statusMessage && statusType === 'error'">
    <div class="note-box show" [ngClass]="statusType">
      <span class="logo-box-note">{{ statusMessage }}</span>
    </div>
  </div>
  
</div>
